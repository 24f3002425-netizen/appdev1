{% extends "base.html" %}

{% block title %}Treatment - Appointment {{ appointment.id }}{% endblock %}

{% block content %}
<h2 class="mb-3">Treatment for Appointment #{{ appointment.id }}</h2>

<p class="mb-2">
    <strong>Patient:</strong> {{ appointment.patient.user.name }}<br>
    <strong>Date:</strong> {{ appointment.date.strftime('%Y-%m-%d') }}<br>
    <strong>Time:</strong> {{ appointment.time.strftime('%H:%M') }}<br>
    <strong>Status:</strong> {{ appointment.status }}
</p>

<form method="post"
      action="{{ url_for('doctor_treatment', appointment_id=appointment.id) }}">
    <div class="mb-3">
        <label class="form-label">Diagnosis</label>
        <textarea name="diagnosis" rows="3" class="form-control">{{
            appointment.treatment.diagnosis if appointment.treatment else ''
        }}</textarea>
    </div>

    <div class="mb-3">
        <label class="form-label">Prescription</label>
        <textarea name="prescription" rows="3" class="form-control">{{
            appointment.treatment.prescription if appointment.treatment else ''
        }}</textarea>
    </div>

    <div class="mb-3">
        <label class="form-label">Notes</label>
        <textarea name="notes" rows="3" class="form-control">{{
            appointment.treatment.notes if appointment.treatment else ''
        }}</textarea>
    </div>

    <button type="submit" class="btn btn-primary">
        Save Treatment & Mark Completed
    </button>
    <a href="{{ url_for('doctor_dashboard') }}" class="btn btn-secondary ms-2">
        Back
    </a>
</form>
{% endblock %}
